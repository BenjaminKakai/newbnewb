# ðŸ”§ Wasaa Calls - REAL Environment Configuration
# Based on your actual working backend setup

# =================================================================
# SOCKET CONFIGURATION (From your working videocall.html)
# =================================================================
# âœ… CORRECT: Your actual socket server
NEXT_PUBLIC_SOCKET_URL=https://calls-dev.wasaachat.com

# Alternative for local development:
# NEXT_PUBLIC_SOCKET_URL=ws://localhost:8082

# =================================================================
# API CONFIGURATION (From your working setup)
# =================================================================
# âœ… CORRECT: Your actual API endpoints
NEXT_PUBLIC_API_BASE_URL=https://calls-dev.wasaachat.com/v1
NEXT_PUBLIC_CALLS_API_URL=https://calls-dev.wasaachat.com/v1

# Local development alternatives:
# NEXT_PUBLIC_API_BASE_URL=http://localhost:8082/v1
# NEXT_PUBLIC_CALLS_API_URL=http://localhost:8082/v1

# =================================================================
# TRANSPORT CONFIGURATION (From your working HTML)
# =================================================================
# âœ… IMPORTANT: Use polling transport (not websocket)
NEXT_PUBLIC_SOCKET_TRANSPORT=polling
NEXT_PUBLIC_SOCKET_UPGRADE=false

# =================================================================
# BACKEND PORTS (From your docker-compose.yml)
# =================================================================
# Call Service API
NEXT_PUBLIC_CALL_SERVICE_PORT=8082

# Redis
REDIS_PORT=6383

# MongoDB
MONGO_PORT=27024

# =================================================================
# NETWORK CONFIGURATION
# =================================================================
# Docker network (from your compose file)
DOCKER_NETWORK=wasaa-network

# =================================================================
# SERVER CONFIGURATION
# =================================================================
# Your actual server domain
SERVER_DOMAIN=calls-dev.wasaachat.com

# Health check endpoints
NEXT_PUBLIC_HEALTH_CHECK_URL=https://calls-dev.wasaachat.com/health

# =================================================================
# WebRTC CONFIGURATION
# =================================================================
# STUN servers (standard Google STUN servers)
NEXT_PUBLIC_STUN_SERVER_1=stun:stun.l.google.com:19302
NEXT_PUBLIC_STUN_SERVER_2=stun:stun1.l.google.com:19302

# TURN server (if you have one)
# NEXT_PUBLIC_TURN_SERVER=turn:your-turn-server.com:3478
# NEXT_PUBLIC_TURN_USERNAME=your-username
# NEXT_PUBLIC_TURN_CREDENTIAL=your-password

# =================================================================
# MEDIASOUP CONFIGURATION (From your working HTML)
# =================================================================
# MediaSoup API endpoints
NEXT_PUBLIC_MEDIASOUP_ROUTER_RTP_URL=https://calls-dev.wasaachat.com/v1/mediasoup/routrtp
NEXT_PUBLIC_MEDIASOUP_TRANSPORT_URL=https://calls-dev.wasaachat.com/v1/mediasoup/transport
NEXT_PUBLIC_MEDIASOUP_CONNECT_URL=https://calls-dev.wasaachat.com/v1/mediasoup/connect
NEXT_PUBLIC_MEDIASOUP_PRODUCE_URL=https://calls-dev.wasaachat.com/v1/mediasoup/produce
NEXT_PUBLIC_MEDIASOUP_CONSUME_URL=https://calls-dev.wasaachat.com/v1/mediasoup/consume

# =================================================================
# DEBUG CONFIGURATION
# =================================================================
NEXT_PUBLIC_DEBUG_MODE=true
NEXT_PUBLIC_LOG_LEVEL=debug

# Socket.IO debug (enable in browser console)
# localStorage.debug = 'socket.io-client:socket'

# =================================================================
# FEATURE FLAGS
# =================================================================
NEXT_PUBLIC_ENABLE_GROUP_CALLS=true
NEXT_PUBLIC_ENABLE_SCREEN_SHARE=true
NEXT_PUBLIC_ENABLE_RECORDING=false
NEXT_PUBLIC_ENABLE_MEDIASOUP=true

# =================================================================
# TIMEOUT CONFIGURATION
# =================================================================
NEXT_PUBLIC_SOCKET_TIMEOUT=10000
NEXT_PUBLIC_CALL_ACCEPT_TIMEOUT=30000
NEXT_PUBLIC_RECONNECTION_ATTEMPTS=5
NEXT_PUBLIC_RECONNECTION_DELAY=1000

# =================================================================
# CORS CONFIGURATION (for your backend)
# =================================================================
# Allowed origins for CORS
CORS_ORIGINS=http://localhost:3000,https://your-frontend-domain.com

# =================================================================
# DEVELOPMENT VS PRODUCTION
# =================================================================
# For development (localhost):
# NEXT_PUBLIC_SOCKET_URL=ws://localhost:8082
# NEXT_PUBLIC_API_BASE_URL=http://localhost:8082/v1

# For production (your actual server):
# NEXT_PUBLIC_SOCKET_URL=https://calls-dev.wasaachat.com
# NEXT_PUBLIC_API_BASE_URL=https://calls-dev.wasaachat.com/v1

# =================================================================
# INSTRUCTIONS FOR SETUP:
# =================================================================
# 1. Copy this file to .env.local in your Next.js project root
# 2. Choose development OR production settings above
# 3. Make sure your Docker services are running:
#    docker-compose up -d
# 4. Verify services are healthy:
#    curl https://calls-dev.wasaachat.com/health
# 5. Test socket connection:
#    telnet calls-dev.wasaachat.com 443
# 6. Restart your Next.js dev server:
#    npm run dev

# =================================================================
# TROUBLESHOOTING URLS:
# =================================================================
# Test your actual endpoints:
# curl https://calls-dev.wasaachat.com/v1/calls
# curl https://calls-dev.wasaachat.com/health
# 
# Check Docker services:
# docker ps
# docker logs wasaa-call-service-api
# docker logs wasaa-call-service-redis
# docker logs wasaa-call-service-mongo
NEXT_PUBLIC_USER_SERVICE_URL=http://138.68.190.213:3010
## REMOVED DUPLICATE/INCORRECT SOCKET URL: NEXT_PUBLIC_SOCKET_URL=http://138.68.190.213:3002
NEXT_PUBLIC_API_KEY=QgR1v+o16jphR9AMSJ9Qf8SnOqmMd4HPziLZvMU1Mt0t7ocaT38q/8AsuOII2YxM60WaXQMkFIYv2bqo+pS/sw==
# =================================================================
# API BASE URLS (Matching what the stores expect)
# =================================================================
NEXT_PUBLIC_CONTACTS_API_BASE_URL=http://138.68.190.213:3019
NEXT_PUBLIC_STATUS_API_BASE_URL=http://138.68.190.213:3002
NEXT_PUBLIC_NOTIFICATION_API_BASE_URL=http://138.68.190.213:3002
NEXT_PUBLIC_AUTH_API_BASE_URL=http://138.68.190.213:3010
NEXT_PUBLIC_WALLET_API_BASE_URL=http://138.68.190.213:3002
NEXT_PUBLIC_CALLS_API_BASE_URL=https://calls-dev.wasaachat.com/v1

# =================================================================
# SOCKET URLS (Correct socket server)
# =================================================================
NEXT_PUBLIC_NOTIFICATION_SOCKET_URL=http://138.68.190.213:3002

# =================================================================
# FIXED ENVIRONMENT VARIABLES (Matching store expectations)
# =================================================================
# Replace the wrong names with correct ones
NEXT_PUBLIC_CONTACTS_API_BASE_URL=http://138.68.190.213:3019
NEXT_PUBLIC_CALLS_API_BASE_URL=https://calls-dev.wasaachat.com/v1
NEXT_PUBLIC_AUTH_API_BASE_URL=http://138.68.190.213:3010
NEXT_PUBLIC_WALLET_API_BASE_URL=http://138.68.190.213:3002

# Add the missing ones
NEXT_PUBLIC_STATUS_API_BASE_URL=http://138.68.190.213:3002
NEXT_PUBLIC_NOTIFICATION_API_BASE_URL=http://138.68.190.213:3002
NEXT_PUBLIC_CALL_SOCKET_URL=https://calls-dev.wasaachat.com

# Socket configuration
NEXT_PUBLIC_SOCKET_URL=https://calls-dev.wasaachat.com
